import{r as l,j as e}from"./index-C7oHUGbv.js";import{a as f,b as y}from"./firestore-BZsbbwbg.js";import{f as S}from"./fotoalexis-DjkPUR1l.js";const h={programmerId:"",requesterName:"",requesterEmail:"",date:"",time:"",note:""},N=[{id:"alexis-static",displayName:"Alexis",specialty:"Full Stack Developer",bio:"Desarrollador full-stack especializado en React, Node.js y Firebase.",email:"aguamanp4@est.ups.edu.ec",photoURL:S,isStatic:!0,skills:["JavaScript","React","Node.js","TypeScript","Firebase","MongoDB","Express"]},{id:"daniel-static",displayName:"Daniel",specialty:"Frontend Developer",bio:"Experto en desarrollo frontend con React y TypeScript.",email:"aguamanp4@est.ups.edu.ec",photoURL:"https://api.dicebear.com/7.x/avataaars/svg?seed=Daniel",isStatic:!0,skills:["React","TypeScript","TailwindCSS","HTML5","CSS3","Responsive Design"]}],R=()=>{const[a,c]=l.useState(h),[n,m]=l.useState(!1),[d,b]=l.useState(N),[p,u]=l.useState(""),[x,i]=l.useState("");l.useEffect(()=>{f().then(s=>{b([...N,...s])})},[]);const t=s=>{const{name:r,value:o}=s.target;c(v=>({...v,[r]:o}))},g=()=>a.programmerId&&a.requesterName&&a.requesterEmail&&a.date&&a.time,j=async s=>{if(s.preventDefault(),!g()){i("Completa los campos obligatorios.");return}m(!0),i(""),u("");try{const r=d.find(o=>o.id===a.programmerId);await y({programmerId:a.programmerId,programmerEmail:r?.email,programmerName:r?.displayName,requesterName:a.requesterName,requesterEmail:a.requesterEmail,slot:{date:a.date,time:a.time},note:a.note}),u("Solicitud enviada. El programador recibira un correo y te avisaremos por email cuando responda."),c(h)}catch(r){console.error("Error al enviar solicitud:",r);const o=r instanceof Error?r.message:"Error desconocido";i(`No se pudo enviar la solicitud: ${o}`)}finally{m(!1)}};return e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Agendar Asesoría"}),e.jsx("p",{className:"text-base-content/70 mb-6",children:"Selecciona programador, fecha y hora. El programador aprobará o rechazará tu solicitud."}),e.jsx("form",{onSubmit:j,className:"card bg-base-100 shadow-lg",children:e.jsxs("div",{className:"card-body space-y-4",children:[p&&e.jsx("div",{className:"alert alert-success text-sm",children:p}),x&&e.jsx("div",{className:"alert alert-error text-sm",children:x}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Programador *"})}),e.jsxs("select",{name:"programmerId",value:a.programmerId,onChange:t,className:"select select-bordered",required:!0,children:[e.jsx("option",{value:"",children:"Selecciona"}),d.map(s=>e.jsxs("option",{value:s.id,children:[s.displayName," · ",s.specialty]},s.id))]}),e.jsx("span",{className:"label-text-alt text-base-content/60",children:"Lista cargada desde Firestore (rol programmer)."})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Tu nombre *"})}),e.jsx("input",{name:"requesterName",value:a.requesterName,onChange:t,className:"input input-bordered",placeholder:"Nombre de quien solicita"})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Correo *"})}),e.jsx("input",{type:"email",name:"requesterEmail",value:a.requesterEmail,onChange:t,className:"input input-bordered",placeholder:"correo@ejemplo.com"})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Fecha *"})}),e.jsx("input",{type:"date",name:"date",value:a.date,onChange:t,className:"input input-bordered"})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Hora *"})}),e.jsx("input",{type:"time",name:"time",value:a.time,onChange:t,className:"input input-bordered"})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Motivo / nota"})}),e.jsx("textarea",{name:"note",value:a.note,onChange:t,className:"textarea textarea-bordered",rows:3})]}),e.jsx("div",{className:"card-actions justify-end",children:e.jsx("button",{className:"btn btn-primary",type:"submit",disabled:n,children:n?"Enviando...":"Enviar solicitud"})})]})})]})};export{R as default};
