import{r as t,j as e}from"./index-CCSejlY3.js";import{a as D,c as P,d as C}from"./firestore-DPHUDQW6.js";const E=[{id:"alexis-static",displayName:"Alexis",email:"aguamanp4@est.ups.edu.ec",specialty:"Full Stack Developer"},{id:"daniel-static",displayName:"Daniel",email:"aguamanp4@est.ups.edu.ec",specialty:"Frontend Developer"}],k={day:"Lunes",from:"09:00",to:"11:00",available:!0},i=()=>({...k}),H=()=>{const[g,j]=t.useState([]),[r,N]=t.useState(""),[d,c]=t.useState([i()]),[m,u]=t.useState(!1),[p,h]=t.useState(""),[x,o]=t.useState("");t.useEffect(()=>{(async()=>{const s=await D();j([...E,...s])})()},[]),t.useEffect(()=>{(async()=>{if(!r)return;const s=await P(r);s?.slots?.length?c(s.slots):c([i()])})()},[r]);const n=(a,s,l)=>{c(y=>y.map((b,S)=>S===a?{...b,[s]:l}:b))},v=()=>c(a=>[...a,i()]),f=async a=>{if(a.preventDefault(),!r){o("Selecciona un programador.");return}u(!0),h(""),o("");try{await C(r,d),h("Horarios guardados.")}catch{o("No se pudo guardar. Revisa conexión o permisos.")}finally{u(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Horarios de asesoría"}),e.jsx("p",{className:"text-base-content/70",children:"Define disponibilidades para que usuarios puedan agendar."})]}),e.jsx("form",{onSubmit:f,className:"card bg-base-100 shadow-md",children:e.jsxs("div",{className:"card-body space-y-4",children:[p&&e.jsx("div",{className:"alert alert-success text-sm",children:p}),x&&e.jsx("div",{className:"alert alert-error text-sm",children:x}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Programador"})}),e.jsxs("select",{className:"select select-bordered",value:r,onChange:a=>N(a.target.value),children:[e.jsx("option",{value:"",children:"Selecciona"}),g.map(a=>e.jsx("option",{value:a.id,children:a.displayName},a.id))]})]}),e.jsx("div",{className:"space-y-3",children:d.map((a,s)=>e.jsx("div",{className:"rounded-lg border border-base-200 p-3",children:e.jsxs("div",{className:"grid gap-2 md:grid-cols-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Día"})}),e.jsx("select",{className:"select select-bordered select-sm",value:a.day,onChange:l=>n(s,"day",l.target.value),children:["Lunes","Martes","Miércoles","Jueves","Viernes"].map(l=>e.jsx("option",{children:l},l))})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Desde"})}),e.jsx("input",{type:"time",className:"input input-bordered input-sm",value:a.from,onChange:l=>n(s,"from",l.target.value)})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Hasta"})}),e.jsx("input",{type:"time",className:"input input-bordered input-sm",value:a.to,onChange:l=>n(s,"to",l.target.value)})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Disponible"})}),e.jsx("input",{type:"checkbox",className:"toggle toggle-primary",checked:a.available,onChange:l=>n(s,"available",l.target.checked)})]})]})},s))}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{type:"button",className:"btn btn-outline btn-sm",onClick:v,children:"Añadir bloque"}),e.jsx("button",{className:"btn btn-primary",type:"submit",disabled:m,children:m?"Guardando...":"Guardar horarios"})]})]})})]})};export{H as default};
