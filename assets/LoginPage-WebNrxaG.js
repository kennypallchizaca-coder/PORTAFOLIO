import{u as p,r,b as j,c as f,j as e,L as N}from"./index-DxcVSFIQ.js";import{G as v,j as y,k as b,l as w,m as k,n as F,o as L}from"./index-CeycBSpl.js";import{F as C}from"./index-CRQQk6_y.js";import{m as u}from"./proxy-Dzs7Ezcg.js";function A(t){return v({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"},child:[]}]})(t)}const S=()=>{const{login:t,isAuthenticated:l,loading:n,user:i}=p(),[c,o]=r.useState(!1),[d,m]=r.useState(""),x=j(),h=f();if(r.useEffect(()=>{if(!n&&l&&i){console.log("✅ Redirigiendo usuario autenticado:",i.email);const s=h.state?.from?.pathname||"/";x(s,{replace:!0})}},[l,n,i,x,h]),n)return e.jsx("div",{className:"flex min-h-[80vh] items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"loading loading-spinner loading-lg text-primary"}),e.jsx("p",{className:"mt-4 text-base-content/70",children:"Verificando sesión..."})]})});const g=async()=>{o(!0),m("");try{await t()}catch(s){console.error("Error en login:",s);let a="No se pudo iniciar sesión. Intenta de nuevo.";s.code==="auth/popup-closed-by-user"?a="Cerraste la ventana. Intenta de nuevo.":s.code==="auth/popup-blocked"?a="Permite ventanas emergentes en tu navegador.":s.code==="auth/unauthorized-domain"&&(a="Dominio no autorizado. Contacta al administrador."),m(a),o(!1)}};return e.jsx("div",{className:"flex min-h-[80vh] items-center justify-center",children:e.jsxs(u.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},className:"w-full max-w-md",children:[e.jsx("div",{className:"card bg-base-100 shadow-2xl",children:e.jsxs("div",{className:"card-body space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br from-primary to-secondary text-3xl text-white shadow-lg",children:e.jsx(y,{className:"h-8 w-8"})}),e.jsx("h2",{className:"text-3xl font-bold",children:"Bienvenido"}),e.jsx("p",{className:"mt-2 text-base-content/70",children:"Inicia sesión para acceder a tu cuenta"})]}),d&&e.jsxs(u.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"alert alert-error",children:[e.jsx(b,{className:"h-5 w-5 shrink-0"}),e.jsx("span",{className:"text-sm",children:d})]}),e.jsx("div",{className:"rounded-lg bg-primary/10 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(w,{className:"mt-0.5 h-5 w-5 shrink-0 text-primary"}),e.jsxs("div",{className:"text-sm text-base-content/80",children:["Usa tu cuenta de Google para continuar. Tu perfil se creará automáticamente como ",e.jsx("strong",{children:"usuario externo"})," hasta que un administrador te asigne un rol."]})]})}),e.jsx("button",{className:"btn btn-primary btn-lg w-full gap-3 shadow-lg transition-all hover:scale-105 hover:shadow-xl",onClick:g,disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading loading-spinner"}),"Conectando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"h-5 w-5"}),"Continuar con Google"]})}),e.jsx("div",{className:"text-center",children:e.jsxs(N,{to:"/",className:"link link-hover inline-flex items-center gap-2 text-sm text-base-content/70",children:[e.jsx(k,{className:"h-4 w-4"}),"Volver al inicio"]})})]})}),e.jsxs("div",{className:"mt-8 grid gap-4 text-center text-sm md:grid-cols-3",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/20",children:e.jsx(A,{className:"h-5 w-5 text-primary"})}),e.jsx("span",{className:"text-base-content/70",children:"Rápido y seguro"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-secondary/20",children:e.jsx(F,{className:"h-5 w-5 text-secondary"})}),e.jsx("span",{className:"text-base-content/70",children:"Datos protegidos"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-accent/20",children:e.jsx(L,{className:"h-5 w-5 text-accent"})}),e.jsx("span",{className:"text-base-content/70",children:"Sin registro manual"})]})]})]})})};export{S as default};
