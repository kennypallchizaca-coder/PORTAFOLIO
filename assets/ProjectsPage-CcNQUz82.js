import{u as k,r,j as e}from"./index-C3FDgbin.js";import{l as S,h as w,i as C}from"./firestore-DHFz8WRy.js";const h={title:"",description:"",category:"academico",role:"frontend",techStack:"",repoUrl:"",demoUrl:""},A=()=>{const{user:c}=k(),[x,f]=r.useState([]),[a,o]=r.useState(h),[n,i]=r.useState(null),[u,j]=r.useState(!1),[b,d]=r.useState(""),[p,N]=r.useState(""),g=async()=>{if(!c?.uid)return;const s=await S(c.uid);f(s)};r.useEffect(()=>{g()},[c?.uid]);const t=s=>{const{name:l,value:m}=s.target;o(U=>({...U,[l]:m}))},v=async s=>{s.preventDefault(),j(!0),d(""),N("");try{const l={title:a.title,description:a.description,category:a.category,role:a.role,techStack:a.techStack.split(",").map(m=>m.trim()).filter(Boolean),repoUrl:a.repoUrl,demoUrl:a.demoUrl};if(n)await w(n,l),d("Proyecto actualizado.");else{if(!c?.uid)throw new Error("Usuario no autenticado");await C(c.uid,l),d("Proyecto creado.")}o(h),i(null),await g()}catch{N("No se pudo guardar el proyecto.")}finally{j(!1)}},y=s=>{i(s.id),o({title:s.title,description:s.description,category:s.category,role:s.role,techStack:s.techStack?.join(", ")||"",repoUrl:s.repoUrl||"",demoUrl:s.demoUrl||""})};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Proyectos"}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[e.jsx("form",{onSubmit:v,className:"card bg-base-100 shadow-md",children:e.jsxs("div",{className:"card-body space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"card-title",children:n?"Editar proyecto":"Nuevo proyecto"}),n&&e.jsx("button",{type:"button",className:"btn btn-ghost btn-xs",onClick:()=>{i(null),o(h)},children:"Cancelar"})]}),b&&e.jsx("div",{className:"alert alert-success text-sm",children:b}),p&&e.jsx("div",{className:"alert alert-error text-sm",children:p}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Título *"})}),e.jsx("input",{name:"title",value:a.title,onChange:t,className:"input input-bordered",required:!0})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Descripción"})}),e.jsx("textarea",{name:"description",value:a.description,onChange:t,className:"textarea textarea-bordered",rows:3})]}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Categoría"})}),e.jsxs("select",{name:"category",value:a.category,onChange:t,className:"select select-bordered",children:[e.jsx("option",{value:"academico",children:"Académico"}),e.jsx("option",{value:"laboral",children:"Laboral"})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Rol"})}),e.jsxs("select",{name:"role",value:a.role,onChange:t,className:"select select-bordered",children:[e.jsx("option",{value:"frontend",children:"Frontend"}),e.jsx("option",{value:"backend",children:"Backend"}),e.jsx("option",{value:"fullstack",children:"Fullstack"}),e.jsx("option",{value:"db",children:"Base de datos"})]})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Tecnologías (coma)"})}),e.jsx("input",{name:"techStack",value:a.techStack,onChange:t,className:"input input-bordered",placeholder:"React, Firebase, Tailwind"})]}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Repo"})}),e.jsx("input",{name:"repoUrl",value:a.repoUrl,onChange:t,className:"input input-bordered",placeholder:"https://github.com/..."})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Demo"})}),e.jsx("input",{name:"demoUrl",value:a.demoUrl,onChange:t,className:"input input-bordered",placeholder:"https://app..."})]})]}),e.jsx("div",{className:"card-actions justify-end",children:e.jsx("button",{className:"btn btn-primary",type:"submit",disabled:u,children:u?"Guardando...":n?"Actualizar proyecto":"Crear proyecto"})})]})}),e.jsxs("div",{className:"space-y-2",children:[x.map(s=>e.jsx("div",{className:"card bg-base-100 shadow-sm",children:e.jsxs("div",{className:"card-body space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.title}),e.jsxs("p",{className:"text-xs text-base-content/60",children:[s.category," · ",s.role]})]}),e.jsx("button",{className:"btn btn-ghost btn-xs",onClick:()=>y(s),children:"Editar"})]}),e.jsx("p",{className:"text-sm text-base-content/70",children:s.description}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.techStack?.map(l=>e.jsx("span",{className:"badge badge-ghost",children:l},l))}),e.jsxs("div",{className:"card-actions justify-end",children:[s.repoUrl&&e.jsx("a",{className:"btn btn-outline btn-xs",href:s.repoUrl,target:"_blank",rel:"noreferrer",children:"Código"}),s.demoUrl&&e.jsx("a",{className:"btn btn-primary btn-xs",href:s.demoUrl,target:"_blank",rel:"noreferrer",children:"Demo"})]})]})},s.id)),!x.length&&e.jsx("div",{className:"alert alert-info text-sm",children:"Aún no hay proyectos."})]})]})]})};export{A as default};
