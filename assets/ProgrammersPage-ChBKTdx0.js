import{r as i,j as e,m as R,n as U,o as L,s as S}from"./index-CCSejlY3.js";import{a as D,u as F}from"./firestore-DPHUDQW6.js";const f={uid:"",displayName:"",email:"",specialty:"",bio:"",role:"programmer",photoURL:"",github:"",instagram:"",whatsapp:""},A=()=>{const[s,d]=i.useState(f),[n,y]=i.useState([]),[m,c]=i.useState(!1),[h,p]=i.useState(""),[x,o]=i.useState(""),[u,b]=i.useState(null),[g,j]=i.useState(""),N=async()=>{const a=await D();y(a)};i.useEffect(()=>{N()},[]);const r=a=>{const{name:l,value:t}=a.target;d(C=>({...C,[l]:t}))},v=a=>{const l=a.target.files?.[0];if(l){b(l);const t=new FileReader;t.onloadend=()=>{j(t.result)},t.readAsDataURL(l)}},w=async(a,l)=>{const t=R(S,`programmers/${a}/profile.jpg`);return await U(t,l),await L(t)},P=async a=>{a.preventDefault(),c(!0),o(""),p("");try{if(!s.uid||!s.displayName||!s.email){o("UID, nombre y correo son obligatorios."),c(!1);return}let l=s.photoURL;u&&(l=await w(s.uid,u)),await F(s.uid,{displayName:s.displayName,email:s.email,specialty:s.specialty,bio:s.bio,role:"programmer",photoURL:l,socials:{github:s.github||void 0,instagram:s.instagram||void 0,whatsapp:s.whatsapp||void 0}}),p("Programador guardado correctamente."),d(f),b(null),j(""),await N()}catch{o("No se pudo guardar. Verifica permisos y conexiÃ³n.")}finally{c(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Programadores"}),e.jsx("p",{className:"text-base-content/70",children:"Crea o edita perfiles y asigna el rol de programador."})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx("form",{onSubmit:P,className:"card bg-base-100 shadow-md",children:e.jsxs("div",{className:"card-body space-y-3",children:[e.jsx("h2",{className:"card-title",children:"Nuevo / editar"}),h&&e.jsx("div",{className:"alert alert-success text-sm",children:h}),x&&e.jsx("div",{className:"alert alert-error text-sm",children:x}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Foto de perfil"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"w-24 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2",children:g||s.photoURL?e.jsx("img",{src:g||s.photoURL,alt:"Preview"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-base-300",children:e.jsx("span",{className:"text-3xl",children:"ðŸ‘¤"})})})}),e.jsx("input",{type:"file",accept:"image/*",onChange:v,className:"file-input file-input-bordered file-input-sm w-full max-w-xs"})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"UID de Firebase *"})}),e.jsx("input",{name:"uid",value:s.uid,onChange:r,className:"input input-bordered",placeholder:"UID del usuario autenticado"}),e.jsx("span",{className:"label-text-alt text-base-content/60",children:"Se crea el documento en users con este UID y rol programmer."})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Nombre *"})}),e.jsx("input",{name:"displayName",value:s.displayName,onChange:r,className:"input input-bordered"})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Correo *"})}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:r,className:"input input-bordered"})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Especialidad"})}),e.jsx("input",{name:"specialty",value:s.specialty,onChange:r,className:"input input-bordered"})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Bio"})}),e.jsx("textarea",{name:"bio",value:s.bio,onChange:r,className:"textarea textarea-bordered"})]}),e.jsx("div",{className:"divider",children:"Redes Sociales"}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"GitHub"})}),e.jsx("input",{name:"github",value:s.github,onChange:r,className:"input input-bordered",placeholder:"https://github.com/usuario"})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Instagram"})}),e.jsx("input",{name:"instagram",value:s.instagram,onChange:r,className:"input input-bordered",placeholder:"https://instagram.com/usuario"})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"WhatsApp"})}),e.jsx("input",{name:"whatsapp",value:s.whatsapp,onChange:r,className:"input input-bordered",placeholder:"https://wa.me/593988888888"})]}),e.jsx("div",{className:"card-actions justify-end",children:e.jsx("button",{className:"btn btn-primary",type:"submit",disabled:m,children:m?"Guardando...":"Guardar programador"})})]})}),e.jsx("div",{className:"card bg-base-100 shadow-md",children:e.jsxs("div",{className:"card-body space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"card-title",children:"Listado"}),e.jsx("span",{className:"badge badge-secondary",children:n.length})]}),e.jsxs("div",{className:"space-y-2",children:[n.map(a=>e.jsx("div",{className:"flex flex-col rounded-lg border border-base-200 p-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"w-12 rounded-full",children:a.photoURL?e.jsx("img",{src:a.photoURL,alt:a.displayName}):e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-base-300",children:e.jsx("span",{className:"text-lg",children:"ðŸ‘¤"})})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-semibold",children:a.displayName}),e.jsx("span",{className:"badge badge-outline capitalize",children:a.specialty||"Especialidad"})]}),e.jsx("p",{className:"text-xs text-base-content/60",children:a.email}),e.jsx("p",{className:"text-sm text-base-content/70",children:a.bio}),a.socials&&e.jsxs("div",{className:"mt-2 flex gap-2",children:[a.socials.github&&e.jsx("a",{href:a.socials.github,target:"_blank",rel:"noopener noreferrer",className:"badge badge-ghost badge-sm",children:"GitHub"}),a.socials.instagram&&e.jsx("a",{href:a.socials.instagram,target:"_blank",rel:"noopener noreferrer",className:"badge badge-ghost badge-sm",children:"Instagram"}),a.socials.whatsapp&&e.jsx("a",{href:a.socials.whatsapp,target:"_blank",rel:"noopener noreferrer",className:"badge badge-ghost badge-sm",children:"WhatsApp"})]})]})]})},a.id)),!n.length&&e.jsx("div",{className:"alert alert-info text-sm",children:"AÃºn no hay programadores. Crea uno con el formulario."})]})]})})]})]})};export{A as default};
