import{r as t,j as e}from"./index-Bn63hJ9p.js";import{a as D,c as C,e as P}from"./firestore-COAHH7ud.js";const k=[{id:"alexis-static",displayName:"Alexis",email:"aguamanp4@est.ups.edu.ec",specialty:"Full Stack Developer",skills:["JavaScript","React","Node.js","TypeScript","Firebase","MongoDB","Express"]},{id:"daniel-static",displayName:"Daniel",email:"aguamanp4@est.ups.edu.ec",specialty:"Frontend Developer",skills:["React","TypeScript","TailwindCSS","HTML5","CSS3","Responsive Design"]}],E={day:"Lunes",from:"09:00",to:"11:00",available:!0},o=()=>({...E}),R=()=>{const[g,j]=t.useState([]),[r,N]=t.useState(""),[d,c]=t.useState([o()]),[m,u]=t.useState(!1),[p,x]=t.useState(""),[h,i]=t.useState("");t.useEffect(()=>{(async()=>{const a=await D();j([...k,...a])})()},[]),t.useEffect(()=>{(async()=>{if(!r)return;const a=await C(r);a?.slots?.length?c(a.slots):c([o()])})()},[r]);const n=(s,a,l)=>{c(y=>y.map((b,S)=>S===s?{...b,[a]:l}:b))},v=()=>c(s=>[...s,o()]),f=async s=>{if(s.preventDefault(),!r){i("Selecciona un programador.");return}u(!0),x(""),i("");try{await P(r,d),x("Horarios guardados.")}catch{i("No se pudo guardar. Revisa conexión o permisos.")}finally{u(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Horarios de asesoría"}),e.jsx("p",{className:"text-base-content/70",children:"Define disponibilidades para que usuarios puedan agendar."})]}),e.jsx("form",{onSubmit:f,className:"card bg-base-100 shadow-md",children:e.jsxs("div",{className:"card-body space-y-4",children:[p&&e.jsx("div",{className:"alert alert-success text-sm",children:p}),h&&e.jsx("div",{className:"alert alert-error text-sm",children:h}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Programador"})}),e.jsxs("select",{className:"select select-bordered",value:r,onChange:s=>N(s.target.value),children:[e.jsx("option",{value:"",children:"Selecciona"}),g.map(s=>e.jsx("option",{value:s.id,children:s.displayName},s.id))]})]}),e.jsx("div",{className:"space-y-3",children:d.map((s,a)=>e.jsx("div",{className:"rounded-lg border border-base-200 p-3",children:e.jsxs("div",{className:"grid gap-2 md:grid-cols-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Día"})}),e.jsx("select",{className:"select select-bordered select-sm",value:s.day,onChange:l=>n(a,"day",l.target.value),children:["Lunes","Martes","Miércoles","Jueves","Viernes"].map(l=>e.jsx("option",{children:l},l))})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Desde"})}),e.jsx("input",{type:"time",className:"input input-bordered input-sm",value:s.from,onChange:l=>n(a,"from",l.target.value)})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Hasta"})}),e.jsx("input",{type:"time",className:"input input-bordered input-sm",value:s.to,onChange:l=>n(a,"to",l.target.value)})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Disponible"})}),e.jsx("input",{type:"checkbox",className:"toggle toggle-primary",checked:s.available,onChange:l=>n(a,"available",l.target.checked)})]})]})},a))}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{type:"button",className:"btn btn-outline btn-sm",onClick:v,children:"Añadir bloque"}),e.jsx("button",{className:"btn btn-primary",type:"submit",disabled:m,children:m?"Guardando...":"Guardar horarios"})]})]})})]})};export{R as default};
