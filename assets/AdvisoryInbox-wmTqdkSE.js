import{u as m,r as a,j as s}from"./index-DDJPxbpu.js";import{i as h,j as b}from"./firestore-DwEaKEMM.js";const f=()=>{const{user:t}=m(),[l,u]=a.useState([]),[r,i]=a.useState(!1),[d,c]=a.useState(""),n=async()=>{if(t?.uid){i(!0),c("");try{const e=await h(t.uid);u(e)}catch{c("No se pudieron cargar las asesorías.")}finally{i(!1)}}};a.useEffect(()=>{n()},[t?.uid]);const o=async(e,x)=>{try{await b(e,x,x==="aprobada"?"Confirmada":"Rechazada"),await n()}catch{c("No se pudo actualizar el estado.")}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Asesorías"}),s.jsx("p",{className:"text-base-content/70",children:"Revisa solicitudes y aprueba o rechaza con feedback."})]}),s.jsx("button",{className:"btn btn-outline btn-sm",onClick:n,disabled:r,children:"Recargar"})]}),d&&s.jsx("div",{className:"alert alert-error text-sm",children:d}),r&&s.jsx("div",{className:"skeleton h-20 w-full"}),s.jsxs("div",{className:"space-y-2",children:[l.map(e=>s.jsx("div",{className:"card bg-base-100 shadow-sm",children:s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:e.requesterName}),s.jsx("p",{className:"text-xs text-base-content/60",children:e.requesterEmail})]}),s.jsx("span",{className:"badge badge-outline capitalize",children:e.status})]}),s.jsxs("p",{className:"text-sm",children:["Fecha: ",e.slot?.date," · Hora: ",e.slot?.time]}),s.jsx("p",{className:"text-sm text-base-content/70",children:e.note}),s.jsxs("div",{className:"card-actions justify-end",children:[s.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>o(e.id,"aprobada"),children:"Aprobar"}),s.jsx("button",{className:"btn btn-error btn-sm",onClick:()=>o(e.id,"rechazada"),children:"Rechazar"})]})]})},e.id)),!l.length&&!r&&s.jsx("div",{className:"alert alert-info text-sm",children:"No hay solicitudes pendientes."})]})]})};export{f as default};
