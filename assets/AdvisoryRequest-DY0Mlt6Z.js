import{r as l,j as e}from"./index-CCSejlY3.js";import{a as v,b as f}from"./firestore-DPHUDQW6.js";const x={programmerId:"",requesterName:"",requesterEmail:"",date:"",time:"",note:""},E=()=>{const[a,o]=l.useState(x),[n,i]=l.useState(!1),[p,h]=l.useState([]),[c,m]=l.useState(""),[d,t]=l.useState("");l.useEffect(()=>{v().then(h)},[]);const r=s=>{const{name:u,value:j}=s.target;o(g=>({...g,[u]:j}))},b=()=>a.programmerId&&a.requesterName&&a.requesterEmail&&a.date&&a.time,N=async s=>{if(s.preventDefault(),!b()){t("Completa los campos obligatorios.");return}i(!0),t(""),m("");try{await f({programmerId:a.programmerId,requesterName:a.requesterName,requesterEmail:a.requesterEmail,slot:{date:a.date,time:a.time},note:a.note}),m("Solicitud enviada. Recibirás respuesta del programador."),o(x)}catch{t("No se pudo enviar la solicitud. Intenta nuevamente.")}finally{i(!1)}};return e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Agendar Asesoría"}),e.jsx("p",{className:"text-base-content/70 mb-6",children:"Selecciona programador, fecha y hora. El programador aprobará o rechazará tu solicitud."}),e.jsx("form",{onSubmit:N,className:"card bg-base-100 shadow-lg",children:e.jsxs("div",{className:"card-body space-y-4",children:[c&&e.jsx("div",{className:"alert alert-success text-sm",children:c}),d&&e.jsx("div",{className:"alert alert-error text-sm",children:d}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Programador *"})}),e.jsxs("select",{name:"programmerId",value:a.programmerId,onChange:r,className:"select select-bordered",required:!0,children:[e.jsx("option",{value:"",children:"Selecciona"}),p.map(s=>e.jsxs("option",{value:s.id,children:[s.displayName," · ",s.specialty]},s.id))]}),e.jsx("span",{className:"label-text-alt text-base-content/60",children:"Lista cargada desde Firestore (rol programmer)."})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Tu nombre *"})}),e.jsx("input",{name:"requesterName",value:a.requesterName,onChange:r,className:"input input-bordered",placeholder:"Nombre de quien solicita"})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Correo *"})}),e.jsx("input",{type:"email",name:"requesterEmail",value:a.requesterEmail,onChange:r,className:"input input-bordered",placeholder:"correo@ejemplo.com"})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Fecha *"})}),e.jsx("input",{type:"date",name:"date",value:a.date,onChange:r,className:"input input-bordered"})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Hora *"})}),e.jsx("input",{type:"time",name:"time",value:a.time,onChange:r,className:"input input-bordered"})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Motivo / nota"})}),e.jsx("textarea",{name:"note",value:a.note,onChange:r,className:"textarea textarea-bordered",rows:3})]}),e.jsx("div",{className:"card-actions justify-end",children:e.jsx("button",{className:"btn btn-primary",type:"submit",disabled:n,children:n?"Enviando...":"Enviar solicitud"})})]})})]})};export{E as default};
